{"ast":null,"code":"import _classCallCheck from\"/home/lysa/Bureau/auth-redux-jwt/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/lysa/Bureau/auth-redux-jwt/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/lysa/Bureau/auth-redux-jwt/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/lysa/Bureau/auth-redux-jwt/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/lysa/Bureau/auth-redux-jwt/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Redirect}from'react-router-dom';export default function withAuth(ComponentToProtect){return(/*#__PURE__*/function(_Component){_inherits(_class,_Component);function _class(){var _this;_classCallCheck(this,_class);_this=_possibleConstructorReturn(this,_getPrototypeOf(_class).call(this));_this.state={loading:true,redirect:false};return _this;}_createClass(_class,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('/api/check/token').then(function(res){if(res.status===200){_this2.setState({loading:false});}else{var error=new Error(res.error);throw error;}}).catch(function(err){console.error(err);_this2.setState({loading:false,redirect:true});});}},{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,redirect=_this$state.redirect;if(loading){return null;}if(redirect){return React.createElement(Redirect,{to:\"/login\"});}return React.createElement(ComponentToProtect,this.props);}}]);return _class;}(Component));}","map":{"version":3,"sources":["/home/lysa/Bureau/auth-redux-jwt/client/src/withAuth.jsx"],"names":["React","Component","Redirect","withAuth","ComponentToProtect","state","loading","redirect","fetch","then","res","status","setState","error","Error","catch","err","console","props"],"mappings":"gnBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CAEA,cAAe,SAASC,CAAAA,QAAT,CAAkBC,kBAAlB,CAAsC,CACnD,sEACE,iBAAc,wCACZ,0EACA,MAAKC,KAAL,CAAa,CACXC,OAAO,CAAE,IADE,CAEXC,QAAQ,CAAE,KAFC,CAAb,CAFY,aAMb,CAPH,gFASsB,iBAClBC,KAAK,CAAC,kBAAD,CAAL,CACGC,IADH,CACQ,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACtB,MAAI,CAACC,QAAL,CAAc,CAAEN,OAAO,CAAE,KAAX,CAAd,EACD,CAFD,IAEO,CACL,GAAMO,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAUJ,GAAG,CAACG,KAAd,CAAd,CACA,KAAMA,CAAAA,KAAN,CACD,CACF,CARH,EASGE,KATH,CASS,SAAAC,GAAG,CAAI,CACZC,OAAO,CAACJ,KAAR,CAAcG,GAAd,EACA,MAAI,CAACJ,QAAL,CAAc,CAAEN,OAAO,CAAE,KAAX,CAAkBC,QAAQ,CAAE,IAA5B,CAAd,EACD,CAZH,EAaD,CAvBH,uCA0BW,iBACuB,KAAKF,KAD5B,CACCC,OADD,aACCA,OADD,CACUC,QADV,aACUA,QADV,CAEP,GAAID,OAAJ,CAAa,CACX,MAAO,KAAP,CACD,CACD,GAAIC,QAAJ,CAAc,CACZ,MAAO,qBAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAP,CACD,CACD,MAAO,qBAAC,kBAAD,CAAwB,KAAKW,KAA7B,CAAP,CACD,CAnCH,oBAAqBjB,SAArB,GAqCD","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nexport default function withAuth(ComponentToProtect) {\n  return class extends Component {\n    constructor() {\n      super();\n      this.state = {\n        loading: true,\n        redirect: false,\n      };\n    }\n\n    componentDidMount() {\n      fetch('/api/check/token')\n        .then(res => {\n          if (res.status === 200) {\n            this.setState({ loading: false });\n          } else {\n            const error = new Error(res.error);\n            throw error;\n          }\n        })\n        .catch(err => {\n          console.error(err);\n          this.setState({ loading: false, redirect: true });\n        });\n    }\n\n\n    render() {\n      const { loading, redirect } = this.state;\n      if (loading) {\n        return null;\n      }\n      if (redirect) {\n        return <Redirect to=\"/login\" />;\n      }\n      return <ComponentToProtect {...this.props} />;\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}